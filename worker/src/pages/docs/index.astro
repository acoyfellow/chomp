---
import Layout from '../../layouts/Layout.astro'
import Nav from '../../components/Nav.astro'
import Code from '../../components/Code.astro'
---
<Layout title="Tutorial — chomp">
  <Nav active="/docs" />
  <main class="max-w-3xl mx-auto px-5 py-12">
    <div class="text-sm font-semibold text-gold mb-2">Tutorial</div>
    <h1 class="text-3xl font-bold tracking-tight mb-2">Send your first prompt</h1>
    <p class="text-zinc-500 dark:text-zinc-400 mb-10">5 minutes. You’ll register your OpenRouter key, dispatch a prompt to a free model, and get the response back.</p>

    <section class="space-y-10">

      <div>
        <h2 class="text-lg font-bold mb-3">1. Get a free OpenRouter key</h2>
        <p class="mb-3 text-zinc-600 dark:text-zinc-400">Sign up at <a href="https://openrouter.ai/keys" class="text-gold hover:underline" target="_blank">openrouter.ai/keys</a> (free). Create an API key. It starts with <code class="bg-zinc-200 dark:bg-zinc-800 px-1.5 py-0.5 rounded text-sm">sk-or-</code>.</p>
      </div>

      <div>
        <h2 class="text-lg font-bold mb-3">2. Register your key with chomp</h2>
        <p class="mb-3 text-zinc-600 dark:text-zinc-400">Trade your OpenRouter key for a chomp token. Your key is stored securely and never exposed in responses.</p>
        <Code code={`curl -X POST https://chomp.coey.dev/api/keys \\
  -H "Content-Type: application/json" \\
  -d '{"openrouter_key": "sk-or-your-key-here"}'`} class="mb-3" />
        <p class="mb-2 text-zinc-600 dark:text-zinc-400">You get back a chomp token:</p>
        <Code code={`{\n  "token": "a1b2c3d4e5f6...",\n  "created": "2026-02-14T12:00:00Z"\n}`} />
        <p class="mt-3 text-zinc-600 dark:text-zinc-400">Save this token. You’ll use it for all API calls:</p>
        <Code code={`export CHOMP_TOKEN="a1b2c3d4e5f6..."`} />
      </div>

      <div>
        <h2 class="text-lg font-bold mb-3">3. Dispatch a prompt</h2>
        <p class="mb-3 text-zinc-600 dark:text-zinc-400">Send a prompt. Chomp picks the best free model automatically.</p>
        <Code code={`curl -X POST https://chomp.coey.dev/api/dispatch \\
  -H "Authorization: Bearer $CHOMP_TOKEN" \\
  -H "Content-Type: application/json" \\
  -d '{"prompt": "What is quicksort? Explain in 3 sentences."}'`} class="mb-3" />
        <p class="mb-2 text-zinc-600 dark:text-zinc-400">You get back a job ID immediately:</p>
        <Code code={`{\n  "id": "m1a2b3c4",\n  "model": "stepfun/step-3.5-flash:free",\n  "status": "running"\n}`} />
      </div>

      <div>
        <h2 class="text-lg font-bold mb-3">4. Poll for the result</h2>
        <p class="mb-3 text-zinc-600 dark:text-zinc-400">Wait a few seconds, then fetch the result:</p>
        <Code code={`curl https://chomp.coey.dev/api/result/m1a2b3c4 \\
  -H "Authorization: Bearer $CHOMP_TOKEN"`} class="mb-3" />
        <p class="mb-2 text-zinc-600 dark:text-zinc-400">When the status is <code class="bg-zinc-200 dark:bg-zinc-800 px-1.5 py-0.5 rounded text-sm">done</code>:</p>
        <Code code={`{\n  "id": "m1a2b3c4",\n  "status": "done",\n  "model": "stepfun/step-3.5-flash:free",\n  "result": "Quicksort is a divide-and-conquer sorting...",\n  "tokens_in": 25,\n  "tokens_out": 87,\n  "latency_ms": 3200\n}`} />
      </div>

      <div>
        <h2 class="text-lg font-bold mb-3">5. See what’s free right now</h2>
        <p class="mb-3 text-zinc-600 dark:text-zinc-400">Free models rotate weekly. Check what’s available (no auth needed):</p>
        <Code code="curl https://chomp.coey.dev/api/models/free" />
      </div>

    </section>

    <div class="mt-12 p-5 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900">
      <div class="font-semibold mb-1">✅ You just burned free tokens</div>
      <p class="text-sm text-zinc-500">That prompt used a free model through your own OpenRouter account. Chomp just routed it. Next: <a href="/docs/reference" class="text-gold hover:underline">API reference</a> or <a href="/docs/guides" class="text-gold hover:underline">guides</a>.</p>
    </div>
  </main>
</Layout>
