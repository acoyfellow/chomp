*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#09090b;--bg1:#0c0c0f;--bg2:#111114;--bg3:#18181b;--bg4:#1f1f23;
  --border:#27272a;--border2:#3f3f46;
  --t1:#fafafa;--t2:#a1a1aa;--t3:#52525b;--t4:#3f3f46;
  --gold:#E8C872;--gold2:#D4AF37;
  --blue:#7B93DB;--purple:#C97BDB;
  --green:#34D399;--red:#F87171;--orange:#F6821F;
  --r:6px;--r2:10px;--r3:16px;
  --ease:cubic-bezier(.16,1,.3,1);
  --font:'Inter',system-ui,sans-serif;
  --mono:'JetBrains Mono',monospace;
}
html,body{height:100%;overflow:hidden}
body{font-family:var(--font);background:var(--bg);color:var(--t1);font-size:13px;line-height:1.5;-webkit-font-smoothing:antialiased}

/* === BOOT SEQUENCE === */
.boot{position:fixed;inset:0;background:var(--bg);display:flex;align-items:center;justify-content:center;z-index:100;animation:bootFade 0.4s 2.2s ease forwards}
.boot-inner{text-align:center}
.boot-mark{font-family:var(--mono);font-size:42px;font-weight:700;letter-spacing:-2px;color:var(--t1);opacity:0;animation:bootReveal 0.6s 0.2s var(--ease) forwards}
.boot-mark span{color:var(--gold)}
.boot-sub{font-size:12px;letter-spacing:4px;text-transform:uppercase;color:var(--t3);opacity:0;animation:bootReveal 0.5s 0.6s var(--ease) forwards;margin-top:8px}
.boot-bar{width:200px;height:2px;background:var(--bg3);margin:24px auto 0;border-radius:1px;overflow:hidden;opacity:0;animation:bootReveal 0.3s 0.9s var(--ease) forwards}
.boot-fill{height:100%;width:0;background:linear-gradient(90deg,var(--gold),var(--gold2));border-radius:1px;animation:bootLoad 1s 1s var(--ease) forwards}
@keyframes bootReveal{to{opacity:1}}
@keyframes bootLoad{to{width:100%}}
@keyframes bootFade{to{opacity:0;pointer-events:none}}

/* === APP === */
.app{height:100vh;display:flex;flex-direction:column;opacity:0;animation:appIn 0.6s 2.4s var(--ease) forwards}
.app.hidden{}
@keyframes appIn{to{opacity:1}}

/* === TOP BAR === */
.top-bar{display:flex;align-items:center;height:48px;padding:0 20px;border-bottom:1px solid var(--border);flex-shrink:0;background:var(--bg1)}
.top-left{width:200px}
.mark{font-family:var(--mono);font-size:16px;font-weight:700;letter-spacing:-0.5px}
.mark-dot{color:var(--gold)}
.top-center{flex:1;display:flex;gap:24px;justify-content:center}
.stat-pill{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--t2)}
.stat-val{font-weight:600;color:var(--t1);font-variant-numeric:tabular-nums}
.stat-val.hot{color:var(--gold)}
.live-pip{width:5px;height:5px;border-radius:50%;background:var(--green);animation:livePulse 2s ease-in-out infinite}
@keyframes livePulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.8)}}
.top-right{width:200px;display:flex;justify-content:flex-end}
.btn-ghost{background:none;border:1px solid var(--border);color:var(--t2);padding:5px 14px;border-radius:var(--r);cursor:pointer;font-family:var(--mono);font-size:11px;transition:all .2s var(--ease)}
.btn-ghost:hover{border-color:var(--t3);color:var(--t1)}

/* === STAGE === */
.stage{flex:1;display:grid;grid-template-columns:200px 1fr 300px;overflow:hidden}

/* === RAIL (sidebar) === */
.rail{background:var(--bg1);border-right:1px solid var(--border);padding:16px 12px;overflow-y:auto}
.rail-label{font-family:var(--mono);font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--t4);margin-bottom:8px;padding-left:4px}
.rail-divider{height:1px;background:var(--border);margin:16px 0}
.q-item{padding:8px;border-radius:var(--r);cursor:pointer;margin-bottom:2px;transition:background .15s}
.q-item:hover{background:var(--bg3)}
.q-item:hover .q-hint{opacity:1}
.q-id{font-family:var(--mono);font-size:10px;color:var(--t4)}
.q-text{font-size:12px;color:var(--t2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.q-hint{font-size:9px;color:var(--t4);opacity:0;transition:opacity .15s}
.d-item{padding:6px 8px;margin-bottom:2px;border-radius:var(--r)}
.d-item .q-text{color:var(--t3);font-size:11px}
.d-agents{display:flex;gap:3px;margin-top:3px}
.d-dot{width:6px;height:6px;border-radius:50%}

/* === ARENA === */
.arena{overflow-y:auto;padding:20px 24px}
.arena-header{display:flex;align-items:center;margin-bottom:16px}
.arena-tabs{display:flex;gap:2px;background:var(--bg2);padding:2px;border-radius:var(--r)}
.tab{background:none;border:none;color:var(--t3);padding:5px 14px;border-radius:4px;cursor:pointer;font-family:var(--font);font-size:12px;font-weight:500;transition:all .2s var(--ease)}
.tab:hover{color:var(--t2)}
.tab.active{background:var(--bg4);color:var(--t1)}

/* === LOOP CARD === */
.loops{display:flex;flex-direction:column;gap:6px}
.loop{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r2);padding:16px 18px;cursor:pointer;transition:all .25s var(--ease);position:relative}
.loop:hover{border-color:var(--border2);transform:translateY(-1px)}
.loop.sel{border-color:var(--gold);box-shadow:0 0 0 1px var(--gold)}
.loop-indicator{position:absolute;left:0;top:12px;bottom:12px;width:2px;border-radius:1px}
.loop-indicator.running{background:var(--green)}
.loop-indicator.gating{background:var(--blue)}
.loop-indicator.handoff{background:var(--orange)}
.loop-indicator.failing{background:var(--red)}

.loop-row1{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px}
.loop-title{font-size:14px;font-weight:600;letter-spacing:-0.2px;flex:1;margin-right:12px}
.loop-badge{font-family:var(--mono);font-size:9px;font-weight:600;letter-spacing:1px;text-transform:uppercase;padding:3px 8px;border-radius:4px}
.loop-badge.running{color:var(--green);background:#34D39912}
.loop-badge.gating{color:var(--blue);background:#7B93DB12}
.loop-badge.handoff{color:var(--orange);background:#F6821F12}
.loop-badge.failing{color:var(--red);background:#F8717112}

.loop-row2{display:flex;align-items:center;gap:16px;margin-bottom:12px}
.loop-meta{font-size:11px;color:var(--t3);display:flex;align-items:center;gap:5px;font-variant-numeric:tabular-nums}
.loop-meta b{color:var(--t2);font-weight:500}
.agent-dots{display:flex;gap:3px}
.agent-dot-sm{width:7px;height:7px;border-radius:50%;transition:transform .15s var(--ease)}
.agent-dot-sm:hover{transform:scale(1.4)}

/* Session chain */
.chain{display:flex;gap:2px;align-items:stretch;height:26px}
.chain-pip{flex:1;max-width:48px;min-width:20px;border-radius:3px;display:flex;align-items:center;justify-content:center;font-family:var(--mono);font-size:9px;font-weight:600;position:relative;transition:all .2s var(--ease)}
.chain-pip::after{content:'';position:absolute;bottom:0;left:2px;right:2px;height:2px;border-radius:1px}
.chain-pip.c-pass{background:#34D39918;color:var(--green)}.chain-pip.c-pass::after{background:var(--green)}
.chain-pip.c-fail{background:#F8717118;color:var(--red)}.chain-pip.c-fail::after{background:var(--red)}
.chain-pip.c-handoff{background:#F6821F18;color:var(--orange)}.chain-pip.c-handoff::after{background:var(--orange)}
.chain-pip.c-active{background:#34D39918;color:var(--green);animation:activePip 2s ease-in-out infinite}.chain-pip.c-active::after{background:var(--green)}
@keyframes activePip{0%,100%{opacity:1}50%{opacity:.5}}

/* Gate progress bar */
.gate-track{display:flex;gap:2px;margin-top:8px;height:3px}
.gate-seg{flex:1;border-radius:1.5px;transition:background .4s var(--ease)}
.gate-seg.g-pass{background:var(--green)}
.gate-seg.g-fail{background:var(--red)}
.gate-seg.g-pending{background:var(--bg4)}

/* === INSPECTOR === */
.inspector{background:var(--bg1);border-left:1px solid var(--border);overflow-y:auto;padding:0}
.inspector-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--t4);font-size:12px;gap:8px}
.inspector-empty-icon{font-size:28px;opacity:.3}

.ins-head{padding:20px 16px 16px;border-bottom:1px solid var(--border)}
.ins-id{font-family:var(--mono);font-size:10px;color:var(--t4);margin-bottom:4px}
.ins-title{font-size:15px;font-weight:600;letter-spacing:-0.3px;margin-bottom:8px;line-height:1.3}
.ins-dir{font-family:var(--mono);font-size:10px;color:var(--t4);margin-bottom:10px}

.ins-section{padding:12px 16px;border-bottom:1px solid var(--border)}
.ins-label{font-family:var(--mono);font-size:9px;letter-spacing:1.5px;text-transform:uppercase;color:var(--t4);margin-bottom:8px}

/* Token bar */
.tok-row{display:flex;justify-content:space-between;font-size:11px;color:var(--t3);margin-bottom:4px;font-variant-numeric:tabular-nums}
.tok-bar{height:2px;background:var(--bg4);border-radius:1px;overflow:hidden}
.tok-fill{height:100%;border-radius:1px;background:linear-gradient(90deg,var(--gold),var(--red));transition:width .5s var(--ease)}

/* Agent breakdown */
.ab-row{display:flex;align-items:center;gap:8px;padding:4px 0;font-size:11px}
.ab-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.ab-name{color:var(--t2);font-weight:500;flex:1}
.ab-router{font-family:var(--mono);font-size:9px;color:var(--t4);background:var(--bg3);padding:1px 5px;border-radius:3px}
.ab-stats{color:var(--t3);font-family:var(--mono);font-size:10px;display:flex;gap:8px}

/* Gates */
.gate-row{display:flex;align-items:center;gap:8px;padding:3px 0;font-size:12px}
.gate-icon{width:14px;text-align:center;font-size:10px}
.gate-name{flex:1;color:var(--t2);font-family:var(--mono);font-size:11px}
.gate-st{font-family:var(--mono);font-size:9px;font-weight:600;letter-spacing:.5px;padding:1px 6px;border-radius:3px}
.gate-st.g-pass{color:var(--green);background:#34D39912}
.gate-st.g-fail{color:var(--red);background:#F8717112}
.gate-st.g-pending{color:var(--t4);background:var(--bg3)}

/* Session list */
.ses-item{padding:8px 0;border-bottom:1px solid var(--border)}
.ses-item:last-child{border-bottom:none}
.ses-row1{display:flex;align-items:center;gap:6px;margin-bottom:4px}
.ses-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}
.ses-dot.s-pass{background:var(--green)}.ses-dot.s-fail{background:var(--red)}.ses-dot.s-handoff{background:var(--orange)}.ses-dot.s-active{background:var(--green);animation:livePulse 2s ease-in-out infinite}
.ses-num{font-family:var(--mono);font-size:10px;font-weight:600;color:var(--t3)}
.ses-sum{font-size:11px;color:var(--t2);flex:1}
.ses-row2{display:flex;align-items:center;gap:6px;padding-left:12px;flex-wrap:wrap}
.ses-agent{display:inline-flex;align-items:center;gap:3px;font-size:9px;color:var(--t3);background:var(--bg3);padding:1px 6px;border-radius:3px}
.ses-agent-dot{width:5px;height:5px;border-radius:50%}
.ses-meta{font-family:var(--mono);font-size:9px;color:var(--t4)}
.ses-sha{font-family:var(--mono);font-size:9px;color:var(--gold);opacity:.6;cursor:pointer;transition:opacity .15s}
.ses-sha:hover{opacity:1}

/* Git audit */
.git-line{display:flex;gap:6px;padding:2px 0;font-size:10px;font-family:var(--mono)}
.git-sha{color:var(--gold);font-weight:600;flex-shrink:0}
.git-msg{color:var(--t3);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.git-tag{flex-shrink:0}

/* Actions */
.ins-actions{padding:12px 16px;display:flex;gap:6px;flex-wrap:wrap}
.btn-s{font-family:var(--mono);font-size:10px;padding:5px 12px;border-radius:var(--r);border:1px solid var(--border);background:none;color:var(--t2);cursor:pointer;transition:all .15s var(--ease)}
.btn-s:hover{border-color:var(--t3);color:var(--t1)}
.btn-s.danger{border-color:#7f1d1d;color:var(--red)}.btn-s.danger:hover{background:#7f1d1d22}
.btn-s.primary{border-color:var(--gold2);color:var(--gold);background:var(--gold)11}.btn-s.primary:hover{background:var(--gold)22}

/* === MODAL === */
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,.75);display:flex;align-items:center;justify-content:center;z-index:200;backdrop-filter:blur(8px);opacity:0;animation:modalIn .25s var(--ease) forwards}
@keyframes modalIn{to{opacity:1}}
.modal-box{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r3);padding:28px;width:520px;max-width:92vw;transform:translateY(10px);animation:modalSlide .3s var(--ease) forwards}
@keyframes modalSlide{to{transform:translateY(0)}}
.modal-title{font-size:16px;font-weight:600;letter-spacing:-0.3px;margin-bottom:4px}
.modal-sub{font-size:11px;color:var(--t3);margin-bottom:20px}
.modal-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:6px;margin-bottom:16px}
.modal-agent{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:12px;cursor:pointer;text-align:center;transition:all .2s var(--ease)}
.modal-agent:hover{border-color:var(--border2)}
.modal-agent.picked{border-color:var(--gold);box-shadow:0 0 0 1px var(--gold)}
.modal-agent-dot{width:10px;height:10px;border-radius:50%;margin:0 auto 8px}
.modal-agent-name{font-size:13px;font-weight:600;margin-bottom:2px}
.modal-agent-cli{font-family:var(--mono);font-size:9px;color:var(--t4);margin-bottom:8px}
.modal-select{width:100%;background:var(--bg);border:1px solid var(--border);color:var(--t2);border-radius:4px;padding:3px 6px;font-family:var(--mono);font-size:10px}
.modal-select:focus{border-color:var(--gold);outline:none}
.modal-router-section{margin-bottom:16px}
.modal-router-section .ins-label{margin-bottom:6px}
.router-opts{display:flex;gap:4px}
.router-opt{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:6px 12px;cursor:pointer;font-size:11px;color:var(--t3);transition:all .15s var(--ease);text-align:center}
.router-opt:hover{border-color:var(--border2);color:var(--t2)}
.router-opt.picked{border-color:var(--gold);color:var(--t1)}
.router-name{font-weight:500}
.modal-foot{display:flex;justify-content:flex-end;gap:8px;padding-top:12px;border-top:1px solid var(--border)}

/* Scrollbar */
::-webkit-scrollbar{width:4px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
::-webkit-scrollbar-thumb:hover{background:var(--border2)}

/* === UNLOCK ANIMATION (completion) === */
.unlock{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:300;background:var(--bg);pointer-events:none}
.unlock-inner{text-align:center;opacity:0;transform:scale(.95);animation:unlockIn .5s .1s var(--ease) forwards}
.unlock-icon{font-size:48px;margin-bottom:12px}
.unlock-text{font-family:var(--mono);font-size:24px;font-weight:700;letter-spacing:-1px;color:var(--gold)}
.unlock-sub{font-size:12px;color:var(--t3);margin-top:6px;letter-spacing:2px;text-transform:uppercase}
@keyframes unlockIn{to{opacity:1;transform:scale(1)}}
